'''
Analyze specific seeds based on random number generation
'''

import numpy as np

from acasxu_dubins import State, make_random_input

def main():
    """main entry point"""

    out_of_plane_seeds, in_plane_seeds = get_seeds()

    labels = ['in-plane', 'out-of-plane']
    tau_dots = [0, -1]
    seeds = [in_plane_seeds, out_of_plane_seeds]

    for label, tau_dot, seed_list in zip(labels, tau_dots, seeds):
        max_tau = 0 if tau_dot == 0 else 160

        vowns = []
        vints = []

        for seed in seed_list:
            init_vec, cmd_list, init_velo, tau_init = make_random_input(seed, max_tau=max_tau, intruder_can_turn=False)

            s = State(init_vec, tau_init, tau_dot, init_velo[0], init_velo[1], save_states=False)
            s.simulate(cmd_list)

            assert s.min_dist < 500, f"seed was safe: {seed}"

            # state vector is: x, y, theta, x2, y2, theta2, time
            vown, vint = init_velo

            vowns.append(vown)
            vints.append(vint)

        vowns = np.array(vowns)
        vints = np.array(vints)

        print(f"{label}, max vown: {np.max(vowns)}. mean: {vowns.mean()}, std: {vowns.std()}")
        print(f"{label}, min vint: {np.min(vints)}. mean: {vints.mean()}, std: {vints.std()}")
        print()

def get_seeds():
    """returns unsafe seeds from 150 million sims (with tau_max=160)"""

    # these are seeds from 150 million sims
    out_of_plane_seeds = [41754697, 47176395, 58288275, 68144431, 80325476, 104860362, 139313670]    

    in_plane_seeds = [57305, 174596, 191434, 207659, 341255, 468582, 872977,
        891092, 1084018, 1182535, 1339442, 1379646, 1380106, 1381252, 1741977,
        1827016, 1995659, 2047216, 2103256, 2107268, 2109254, 2159985, 2185034,
        2223820, 2449438, 2525697, 2559738, 2587920, 2715712, 2811517, 2843377,
        2910699, 3036565, 3041261, 3355501, 3463446, 3523631, 3595159, 3670986,
        3786972, 4032115, 4147086, 4177080, 4186235, 4321800, 4419657, 4420931,
        4461333, 4490092, 4497346, 4561462, 4602454, 4671104, 4896564, 5040731,
        5067217, 5146108, 5155116, 5166910, 5175578, 5283532, 5291816, 5425371,
        5469674, 5486036, 5539388, 5573482, 5830725, 5939157, 6070328, 6222038,
        6238406, 6322234, 6327315, 6521258, 6792506, 6826797, 7007548, 7129490,
        7240761, 7265293, 7324958, 7345622, 7429172, 7494757, 7550231, 7566846,
        7639246, 7751903, 7809831, 7827052, 7859160, 7952273, 8016128, 8029069,
        8115854, 8164652, 8192713, 8203803, 8210068, 8245012, 8255207, 8368571,
        8583365, 8650189, 8654644, 8683500, 8786598, 8796358, 8913670, 8956330,
        8995219, 8999051, 9025994, 9156102, 9205944, 9227796, 9237358, 9238926,
        9253590, 9272330, 9363089, 9418202, 9426299, 9456938, 9480589, 9495967,
        9499473, 9577626, 9632032, 9984283, 10160748, 10438088, 10550851, 10599580,
        10600075, 10706314, 10785397, 10799136, 10902918, 10933530, 10952364,
        10994423, 11128277, 11153378, 11379693, 11380965, 11443145, 11454806,
        11478434, 11493545, 11502525, 11534281, 11584328, 11617699, 11633521,
        11644317, 11704871, 11782791, 11805570, 11806450, 11826564, 12017145,
        12137104, 12137812, 12313463, 12389044, 12413173, 12442400, 12521846,
        12526718, 12597606, 12627611, 12688171, 12689871, 12870792, 12959700,
        13541712, 13543310, 13544417, 13918229, 14197876, 14228068, 14305464,
        14357733, 14588537, 14593607, 14670580, 15138084, 15150930, 15184253,
        15446638, 15452029, 15571214, 15618171, 15629793, 15709215, 15892824,
        15933625, 15954594, 16098525, 16184726, 16280122, 16397136, 16445796,
        16619660, 16777276, 16837048, 16941605, 16960305, 17107777, 17194406,
        17197845, 17209862, 17299576, 17524466, 17620991, 17922368, 17988587,
        18094358, 18110162, 18132295, 18376809, 18427191, 18600762, 18716243,
        18718452, 19039653, 19111604, 19157644, 19360891, 19421160, 19623417,
        19653357, 19923013, 20014898, 20091694, 20099909, 20304510, 20498321,
        20516057, 20611946, 20689448, 20820431, 20866647, 20881285, 20934591,
        20984588, 21051188, 21188837, 21263038, 21281513, 21369621, 21485044,
        21506271, 21521774, 21532455, 21716775, 21729876, 21810593, 21821483,
        21852657, 21913621, 21969084, 21972626, 21984769, 22164597, 22191078,
        22365803, 22439657, 22503350, 22534807, 22674113, 22750835, 22759440,
        22813069, 22878715, 22911031, 22995252, 23005060, 23005437, 23291223,
        23339769, 23350611, 23371326, 23407790, 23415802, 23579469, 23629053,
        23878744, 23884523, 23895549, 23945050, 23982747, 23988849, 24053998,
        24067626, 24169970, 24232617, 24292203, 24350022, 24603342, 24623496,
        24803705, 25011798, 25179370, 25251837, 25313446, 25394413, 25417792,
        25614391, 25627014, 25651071, 25690288, 25818971, 25933595, 25979669,
        26031949, 26072818, 26140837, 26225059, 26253928, 26523036, 26571939,
        26742418, 26753272, 26815875, 26876392, 26921765, 27080451, 27184548,
        27230460, 27316575, 27431848, 27504251, 27505291, 27575142, 27619588,
        27698266, 27739256, 27767293, 27794545, 28002663, 28030910, 28360451,
        28390771, 28525269, 28587263, 28859715, 28939185, 28979347, 29179584,
        29282510, 29332275, 29405963, 29436634, 29965563, 30064254, 30288035,
        30381223, 30385391, 30435796, 30533219, 30867438, 30906788, 30947020,
        31038668, 31095759, 31147297, 31174288, 31258520, 31278549, 31393964,
        31578598, 31603596, 31662542, 31696857, 31720930, 31825664, 32076158,
        32131318, 32217456, 32233025, 32521609, 32572973, 32764345, 32820112,
        32944478, 32980589, 33163090, 33193949, 33269168, 33299123, 33308171,
        33344510, 33604541, 33632478, 33649628, 33660702, 33719732, 33959595,
        33973546, 34109375, 34285553, 34367713, 34549527, 34589575, 34687004,
        34748329, 34758336, 34924286, 34949394, 35004134, 35017646, 35036915,
        35127062, 35131399, 35161770, 35167593, 35172681, 35197797, 35237000,
        35299160, 35529145, 35538815, 35769266, 35848576, 35925059, 35941552,
        35997243, 36193940, 36243317, 36283349, 36333283, 36380513, 36385707,
        36494385, 36512043, 36512241, 36672330, 36791412, 36804262, 36808119,
        36858166, 36877947, 36958646, 36973811, 37062528, 37484059, 37515705,
        37541171, 37543369, 37548601, 37613192, 37704099, 37735413, 37804962,
        37881226, 37991349, 38000449, 38036126, 38124310, 38160862, 38207822,
        38303215, 38396756, 38426996, 38444456, 38451136, 38555044, 38665901,
        38839283, 38981835, 39103806, 39164215, 39312556, 39400159, 39401620,
        39401897, 39648656, 39663276, 39673130, 39715244, 39722455, 39936978,
        39938952, 40024737, 40213620, 40391321, 40462469, 40588112, 40651008,
        40734264, 40748229, 40863251, 40867805, 40912160, 40913467, 40960468,
        40968118, 41147498, 41255388, 41515728, 41625431, 41713154, 41758664,
        41833783, 42178325, 42240300, 42315961, 42362982, 42438047, 42506352,
        42575502, 42647703, 42805198, 42898167, 42937204, 43010657, 43076256,
        43108441, 43201256, 43362222, 43429709, 43504786, 43614429, 43716270,
        43890182, 44069606, 44089634, 44302004, 44336375, 44470897, 44545914,
        44553411, 44582308, 44619800, 44654625, 44818680, 44826918, 44834596,
        44973450, 45096766, 45234913, 45251714, 45337309, 45342513, 45396633,
        45453973, 45488067, 45631167, 45926823, 45985891, 46283214, 46290585,
        46422065, 46468260, 46489490, 46512768, 46531698, 46533345, 46544060,
        46669364, 46896806, 46975087, 47009583, 47117088, 47148420, 47314237,
        47317309, 47451505, 47584217, 47624798, 47628017, 47718098, 47729480,
        47782909, 47798731, 47865723, 47866588, 47930735, 47969544, 47976276,
        48056613, 48148596, 48194994, 48309587, 48355511, 48445798, 48520369,
        48550943, 48670650, 48881288, 49184486, 49220143, 49236834, 49393314,
        49480472, 49719011, 49825375, 49871668, 49872396, 49873182, 49953060,
        50034471, 50218517, 50261121, 50303565, 50313988, 50400674, 50432009,
        50476503, 50484321, 50570843, 50614637, 50624325, 50724286, 50776194,
        50854771, 51073770, 51375773, 51408702, 51441489, 51449191, 51527390,
        51587797, 51610973, 51672847, 51675111, 51739014, 51745517, 51779913,
        51807553, 51854902, 51943539, 51946736, 51982486, 52130435, 52139858,
        52164655, 52642871, 52894965, 52999594, 53014304, 53144079, 53238958,
        53248310, 53301660, 53433755, 53435348, 53438782, 53507908, 53511190,
        53581433, 53655818, 53915585, 54053893, 54134971, 54261796, 54300202,
        54454999, 54595254, 54717670, 54874654, 54984957, 55026510, 55083503,
        55104956, 55164482, 55283471, 55388079, 55480977, 55655985, 55660179,
        55846126, 55965207, 56001855, 56046039, 56049574, 56075478, 56101386,
        56234260, 56289199, 56496036, 56601464, 56717585, 56991738, 57200301,
        57261962, 57439718, 57440818, 57595084, 57675935, 57723988, 57798437,
        57855192, 57865868, 57933549, 58102078, 58227294, 58253602, 58307231,
        58649337, 58658290, 58681380, 58806572, 58921345, 59153359, 59229634,
        59310107, 59535293, 59580761, 59680189, 59723240, 59794313, 59840586,
        59840643, 59862378, 59906561, 59942580, 60229856, 60269521, 60345153,
        60440633, 60458596, 60486548, 60627474, 60819996, 60912618, 61128999,
        61180190, 61213724, 61245259, 61268260, 61536473, 61572665, 61924511,
        62084216, 62148660, 62348289, 62366785, 62405801, 62462939, 62570428,
        62574336, 62608659, 62671170, 62891396, 63223715, 63377452, 63451652,
        63486314, 63624450, 63735304, 63802686, 63837453, 63844746, 63900912,
        63961229, 64027111, 64119914, 64193389, 64232475, 64284829, 64440734,
        64548881, 64588902, 64643148, 64660113, 64677626, 64737108, 64874941,
        64919359, 65108551, 65121318, 65124082, 65181597, 65461998, 65621446,
        65768576, 65801444, 65852613, 65935231, 66017427, 66333115, 66356970,
        66395893, 66411061, 66474866, 66550494, 66615810, 66630489, 66816034,
        66893115, 67003460, 67009956, 67102447, 67104894, 67129531, 67173710,
        67199488, 67454875, 67497100, 67535072, 67594887, 67613805, 67741593,
        67860452, 67907625, 67996566, 68004469, 68056967, 68252019, 68494294,
        68508060, 68517530, 68572048, 68655936, 68791878, 69060723, 69261616,
        69309622, 69400099, 69416631, 69466851, 69543794, 69554580, 69567424,
        69625303, 69701933, 69931652, 69998532, 70016018, 70035036, 70038435,
        70186721, 70236424, 70365965, 70417656, 70452887, 70506862, 70689560,
        70720678, 70766480, 70853780, 70862920, 70986927, 70992243, 71000644,
        71039055, 71162086, 71195713, 71227328, 71478313, 71575408, 71601104,
        71605693, 71862510, 71920745, 71948870, 72237264, 72246423, 72259142,
        72329892, 72379255, 72450742, 72740080, 72782297, 72805662, 72939098,
        72969137, 73032041, 73032956, 73234183, 73236680, 73325294, 73435610,
        73493771, 73687447, 73729363, 73876765, 73936311, 73968877, 74132641,
        74193452, 74649065, 74674840, 74779763, 74807719, 75295621, 75513371,
        75687975, 75815462, 75884190, 75901746, 75962156, 76040555, 76186945,
        76495189, 76668854, 76821675, 76904923, 76957375, 77028407, 77078174,
        77141859, 77147657, 77181787, 77254538, 77295219, 77460239, 77466276,
        77584938, 77917743, 78021164, 78141509, 78173031, 78337079, 78370048,
        78399159, 78464546, 78561776, 78622836, 78671792, 78682462, 78709037,
        78843274, 78893507, 79024079, 79024400, 79033762, 79037292, 79119781,
        79264014, 79346748, 79372506, 79373733, 79562528, 79580349, 79653733,
        79709505, 79731265, 79779043, 79788276, 79845164, 79897243, 79914395,
        79982289, 79995196, 80001306, 80180324, 80257659, 80354302, 80432044,
        80632510, 80706138, 80817580, 80979233, 81028351, 81177526, 81259108,
        81314274, 81451269, 81541044, 81579124, 81772303, 82009084, 82221748,
        82387392, 82388450, 82470106, 82473701, 82498123, 82609274, 82701390,
        82711699, 83130920, 83289571, 83292268, 83326254, 83341792, 83461677,
        83524370, 83679333, 83695552, 83797566, 83802203, 83832657, 83860577,
        83955389, 83964079, 84060679, 84192277, 84249703, 84359443, 84391696,
        84411109, 84518731, 84540218, 84567065, 84612500, 84693782, 84944570,
        84954496, 84994979, 85043147, 85148740, 85497374, 85505949, 85508677,
        85572565, 85626119, 85632495, 85694945, 85759431, 85806286, 85859780,
        85868057, 86029098, 86060782, 86076658, 86085656, 86130079, 86146309,
        86158355, 86255317, 86286989, 86327416, 86339186, 86360431, 86409385,
        86419826, 86453292, 86475098, 86514855, 86724895, 86772993, 86801935,
        86807897, 86876151, 87269724, 87391513, 87491591, 87493410, 87503655,
        87596919, 87647676, 87666522, 87886647, 87893473, 88100099, 88131577,
        88168426, 88226153, 88367842, 88476883, 88494783, 88505947, 88677675,
        88716797, 89033418, 89140651, 89184060, 89210505, 89469941, 89497589,
        89502515, 89673009, 89738932, 89846741, 89896265, 90157147, 90164792,
        90171639, 90176964, 90334574, 90438555, 90512557, 90592475, 90666049,
        90879079, 90933647, 90933859, 90934490, 90962208, 91019767, 91134440,
        91195379, 91293844, 91322406, 91644515, 91781129, 91805270, 91836724,
        91955779, 92082895, 92152213, 92295200, 92465395, 92567403, 92656389,
        92846081, 92949638, 92979996, 92996749, 93032228, 93044925, 93055364,
        93141811, 93401489, 93455431, 93455904, 93530264, 93639699, 93685231,
        93731320, 93944208, 94218306, 94458913, 94552011, 94562722, 94766642,
        94775550, 94780612, 94907718, 94915343, 94920420, 94973703, 94984322,
        94988483, 94999846, 95290826, 95406454, 95494057, 95588853, 95686008,
        95690702, 95778599, 95836859, 95982470, 96024974, 96045393, 96469040,
        96563023, 96629034, 96702380, 97024295, 97126701, 97151412, 97173499,
        97207345, 97228800, 97234505, 97285821, 97338586, 97652284, 97772108,
        97812387, 97887860, 97972167, 98010084, 98032893, 98061101, 98089192,
        98224563, 98259623, 98280196, 98478863, 98660519, 98714969, 98751071,
        98826755, 98867487, 98871125, 98871173, 98932066, 99011086, 99064106,
        99160987, 99307962, 99342892, 99369640, 99559874, 99626501, 99666720,
        99748794, 99804268, 99928952, 99952697, 99978102, 99988600, 100037060,
        100062425, 100101702, 100131569, 100175438, 100213999, 100445944,
        100479227, 100493613, 100605505, 100656371, 100912788, 101122541,
        101140305, 101175597, 101242275, 101367571, 101417138, 101539099,
        101598606, 101667104, 101681987, 101741869, 102079580, 102244200,
        102275498, 102344891, 102417277, 102429055, 102446582, 102479237,
        102509316, 102560631, 102590061, 102658927, 102728452, 102769145,
        102792291, 102930442, 103015182, 103119979, 103121538, 103424298,
        103483252, 103483749, 103498091, 103523060, 103763518, 103795998,
        103884141, 103885148, 103956546, 103986773, 104038993, 104148562,
        104361456, 104627541, 104646634, 104862918, 104880878, 105040965,
        105354927, 105364747, 105441890, 105481098, 105553977, 105743878,
        105748735, 105827702, 105905612, 105936813, 106001579, 106080032,
        106380770, 106435883, 106679478, 106679705, 106751064, 106785949,
        106890022, 106992093, 107015274, 107230296, 107345690, 107421596,
        107544997, 107625042, 107707793, 107902734, 107998530, 108044142,
        108226596, 108249529, 108289716, 108364761, 108380556, 108420310,
        108443767, 108522870, 108554571, 108649577, 108699476, 108864644,
        108970407, 109011173, 109396042, 109674735, 109698079, 109725413,
        109745017, 109887404, 109891903, 109935203, 110256699, 110282629,
        110288999, 110359110, 110399291, 110407226, 110482019, 110569572,
        110626713, 110768750, 110965970, 111031395, 111044913, 111082813,
        111144447, 111398582, 111477601, 111523555, 111535364, 111545536,
        111651390, 111838027, 112059842, 112085977, 112360214, 112384047,
        112481786, 112528015, 112615928, 112693214, 112858737, 112918724,
        112985541, 113093348, 113187336, 113244039, 113317045, 113429155,
        113435423, 113484498, 113490593, 113503703, 114096816, 114312440,
        114594720, 114725721, 114779943, 114866343, 114952782, 115060906,
        115139149, 115230816, 115342862, 115541294, 115580786, 115843819,
        115881080, 116097297, 116258213, 116305565, 116400651, 116408926,
        116481248, 116495258, 116513348, 116568625, 116672983, 116729780,
        116952395, 117042081, 117683417, 117747797, 117751365, 118038841,
        118196393, 118262755, 118320164, 118461017, 118656590, 118711826,
        118842660, 118869545, 118915439, 119012779, 119248753, 119459639,
        119577903, 119591443, 119595864, 119630541, 119778278, 119826170,
        119826562, 119850513, 119853613, 120007036, 120013615, 120064955,
        120086520, 120118067, 120179809, 120180357, 120220782, 120284668,
        120312904, 120358667, 120693605, 120741917, 120850368, 121034938,
        121088654, 121090070, 121264470, 121278942, 121495813, 121497025,
        121556318, 121638859, 121669519, 121890086, 122025334, 122113325,
        122203177, 122381516, 122514329, 122558807, 122596443, 122647024,
        122830114, 122833918, 122856311, 122861104, 122962804, 123178325,
        123305080, 123321224, 123361777, 123383926, 123434884, 123442988,
        123686621, 123782332, 123941237, 124068245, 124334052, 124383903,
        124434706, 124528144, 124568010, 124574374, 124707967, 124882840,
        124889756, 125051053, 125063913, 125177057, 125395955, 125584609,
        125600125, 125749462, 125856883, 125867373, 125879844, 125887875,
        125987948, 125989794, 126182840, 126300041, 126424313, 126555133,
        126677400, 126744222, 126767142, 126928756, 127014281, 127118582,
        127319158, 127409765, 127713441, 127824829, 127953515, 127959412,
        127959881, 128033993, 128246154, 128253323, 128303027, 128304411,
        128341589, 128539427, 128802335, 128820640, 129106905, 129361688,
        129369491, 129420203, 129513864, 129533225, 129547045, 129695237,
        129735315, 129743961, 129833057, 129840916, 130024757, 130128905,
        130140047, 130184395, 130190704, 130521367, 130554401, 130635158,
        130770000, 130813230, 130921528, 131076664, 131496786, 131701305,
        131838555, 131877493, 131890158, 131987015, 132011478, 132090509,
        132090936, 132354247, 132401530, 132918629, 133285996, 133327889,
        133403397, 133423846, 133457912, 133547600, 133564897, 133658960,
        133716758, 133771551, 133873272, 133989804, 134092084, 134110743,
        134139210, 134303046, 134469283, 134728285, 135132094, 135279058,
        135439030, 135439629, 135454412, 135647392, 135659824, 135670467,
        135712627, 135750167, 135916631, 135940965, 136036747, 136174132,
        136320560, 136406592, 136590785, 136662703, 136663886, 136668595,
        136775688, 136849913, 137306921, 137383103, 137453338, 137478870,
        137563404, 137643498, 137775322, 137817985, 137818114, 137863413,
        137909474, 137950647, 138021796, 138055549, 138160776, 138263168,
        138364411, 138435822, 138512025, 138753311, 138762582, 138912223,
        138968900, 138979942, 138988607, 139221919, 139440675, 139464372,
        139535937, 139616220, 139779056, 139889769, 139894678, 140289988,
        140451519, 140465888, 140618611, 140710789, 140981941, 141016578,
        141045162, 141120885, 141187988, 141285418, 141288223, 141334870,
        141844338, 141956899, 142162942, 142165619, 142233618, 142335873,
        142364481, 142415892, 142429124, 142479835, 142654140, 142889659,
        142912519, 142921063, 142981475, 142993177, 143026970, 143029766,
        143043730, 143108982, 143171361, 143271759, 143486016, 143507365,
        143567735, 143894771, 144346011, 144728831, 144744667, 144748513,
        144821847, 145018054, 145073475, 145172305, 145373519, 145597434,
        145631542, 145677029, 145843026, 145909842, 145991322, 146167501,
        146195810, 146403727, 146504979, 146534756, 146554687, 146646592,
        146737825, 146796280, 147249466, 147344622, 147397408, 147584101,
        147708669, 147716849, 147804614, 147828040, 147842945, 148037041,
        148053155, 148122885, 148139433, 148159022, 148259840, 148295990,
        148517648, 148534033, 148586930, 148654682, 148751365, 148857371,
        149049143, 149075754, 149144495, 149225265, 149248210, 149286736,
        149345455, 149439570, 149470208, 149524766, 149527086, 149587523,
        149613402, 149784526, 149787166, 149878509, 149902563]

    return out_of_plane_seeds, in_plane_seeds

if __name__ == "__main__":
    main()
